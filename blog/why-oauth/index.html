<!DOCTYPE html><html lang="en"><head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    <meta name="description" content="&amp;#x2755; This is Part 1 of a two-part blog series on OAuth.&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Part 1: Why OAuth focuses on the need for OAuth.&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Part 2: OAuth in Detail goes deep into the wo">
<meta property="og:type" content="article">
<meta property="og:title" content="OAuth for Dummies [Part 1] Why OAuth">
<meta property="og:url" content="http://codecoffeecommit.com/blog/why-oauth/index.html">
<meta property="og:site_name" content="Code Coffee Commit">
<meta property="og:description" content="&amp;#x2755; This is Part 1 of a two-part blog series on OAuth.&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Part 1: Why OAuth focuses on the need for OAuth.&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Part 2: OAuth in Detail goes deep into the wo">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/integrate-with-api-1.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/integrate-with-api-2.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/integrate-with-api-3.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/integrate-with-api-4.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-protected-resource.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-client-application.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-resource-owner.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-authorization-server.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-dance-1.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-dance-2.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-dance-3.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-dance-4.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-dance-5.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-dance-6.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-example-1.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-example-2.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-example-3.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-example-4.png">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-example-5.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-example-6.jpg">
<meta property="og:image" content="http://codecoffeecommit.com/blog/why-oauth/oauth-example-7.jpg">
<meta property="article:published_time" content="2021-08-22T13:26:59.000Z">
<meta property="article:modified_time" content="2022-04-10T07:54:13.058Z">
<meta property="article:author" content="Deeheem Ansari">
<meta property="article:tag" content="#oauth">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://codecoffeecommit.com/blog/why-oauth/integrate-with-api-1.jpg">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>OAuth for Dummies [Part 1] Why OAuth</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" "top"="" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/blog/">Blog</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post " href="/blog/oauth-explained/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post " href="/blog/5-surprises-to-expect-when-learning-python/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top " href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://codecoffeecommit.com/blog/why-oauth/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://codecoffeecommit.com/blog/why-oauth/&amp;text=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://codecoffeecommit.com/blog/why-oauth/&amp;is_video=false&amp;description=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=OAuth for Dummies [Part 1] Why OAuth&amp;body=Check out this article: http://codecoffeecommit.com/blog/why-oauth/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://codecoffeecommit.com/blog/why-oauth/&amp;name=OAuth for Dummies [Part 1] Why OAuth&amp;description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://codecoffeecommit.com/blog/why-oauth/&amp;t=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Authentication"><span class="toc-number">1.1.</span> <span class="toc-text">Authentication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Authorization"><span class="toc-number">1.2.</span> <span class="toc-text">Authorization</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Problem"><span class="toc-number">2.</span> <span class="toc-text">The Problem</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Solutions"><span class="toc-number">3.</span> <span class="toc-text">Solutions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Credential-Sharing"><span class="toc-number">3.1.</span> <span class="toc-text">(1) Credential Sharing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Cookies"><span class="toc-number">3.2.</span> <span class="toc-text">(2) Cookies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-API-Keys"><span class="toc-number">3.3.</span> <span class="toc-text">(3) API Keys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-OAuth-2-0"><span class="toc-number">3.4.</span> <span class="toc-text">(4) OAuth 2.0</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OAuth-2-0-Players"><span class="toc-number">4.</span> <span class="toc-text">OAuth 2.0 Players</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#A-typical-OAuth-request-flow"><span class="toc-number">5.</span> <span class="toc-text">A typical OAuth request flow</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Example"><span class="toc-number">6.</span> <span class="toc-text">Example</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Final-words"><span class="toc-number">7.</span> <span class="toc-text">Final words</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        OAuth for Dummies [Part 1] Why OAuth
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <span itemprop="name">Deeheem Ansari</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-08-22T13:26:59.000Z" itemprop="datePublished">2021-08-22</time>
        
      
    </div>


      <span class="article-time">
        <i class="fa fa-clock"></i>
        11 min read
      </span>
      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Security/">Security</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/oauth/" rel="tag">#oauth</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><em><span class="github-emoji" alias="grey_exclamation" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2755.png?v8">❕</span> This is Part 1 of a two-part blog series on OAuth.</em><br><em>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/blog/why-oauth/" title="Part 1: Why OAuth">Part 1: Why OAuth</a> focuses on the need for OAuth.</em><br><em>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/blog/oauth-explained/" title="Part 2: OAuth in Detail">Part 2: OAuth in Detail</a> goes deep into the workings of OAuth.</em></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Are you someone who has heard about the buzzword OAuth, but never seemed to understand it fully? Or heck, even someone who understands OAuth, but never had the time to dive into why there was ever a need for this complex yet powerful framework? Then you are at the right place.</p>
<p>In this post, I am going to cover how OAuth evolved and what were some limitations that developers have faced throughout history.</p>
<p>Before we proceed, let’s clear up on some basics first.</p>
<h3 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h3><p>Authentication is the process of verifying identity. It helps confirm that people are who they say they are. It deals with login IDs and passwords.</p>
<h3 id="Authorization"><a href="#Authorization" class="headerlink" title="Authorization"></a>Authorization</h3><p>Authorization is the process of verifying what someone is allowed to do. It deals with permissions and roles associated with entities.</p>
<h2 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h2><p>Let’s consider the problem of API Authorization. We all have seen an option like this on various sites:</p>

    <div>
      <img src="/blog/why-oauth/integrate-with-api-1.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>How exactly is an application allowed access to an API? Let’s say the API is responsible for sending an email on behalf of the user. That said, we wouldn’t want the application to perform other tasks like reading or deleting emails on the user’s behalf.</p>
<p>There exist a few solutions with which this can be achieved, let’s go through them one at a time.</p>
<h2 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h2><h3 id="1-Credential-Sharing"><a href="#1-Credential-Sharing" class="headerlink" title="(1) Credential Sharing"></a>(1) Credential Sharing</h3><p>The simplest solution is asking the user with the credentials to the API using a form like this:</p>

    <div>
      <img src="/blog/why-oauth/integrate-with-api-2.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>There are a couple of issues associated with this method.</p>
<p><strong>Issue #1: Impersonation</strong></p>
<p>The application is impersonating the user. There is no way to know the difference between the application and the user. Because of this:</p>
<ul>
<li>We lose the ability to restrict access to the application. Instead of only being able to send emails, the application can also read and delete them.</li>
<li>The application can also access any other part of the API and potentially many other APIs. </li>
<li>If the application knows the username and password, then there is nothing stopping it from logging in as the user and changing the password.</li>
</ul>
<p><strong>Issue #2: Revocation</strong></p>
<p>What if the application has been compromised? How do we revoke those credentials?</p>
<ul>
<li>The user will have to go and change the password. Now, what if the password was being used at other websites? While we should encourage users to use different passwords for different websites, we should not penalize them for not doing so when we make a mistake. </li>
<li>So we not only do a disservice to the user, but we also break any other application using the API since the credentials they were using have now become invalid.</li>
</ul>
<p><strong>Issue #3: Exposed user credentials</strong></p>
<p>If we store the username and password to prevent the need to ask for them every time we need access:</p>
<ul>
<li>It increases the API attack surface.</li>
<li>The credentials will need to be stored in a reversible format within the consuming application. So instead of using a non-reversible password hashing algorithm, the app will have to<ul>
<li>Either encrypt it</li>
<li>Or store it in plain text</li>
</ul>
</li>
</ul>
<p><strong>Issue #4: Something you know</strong></p>
<p>Because these credentials need to be repeatable, the user credentials are therefore limited to a single factor – this is something you know. Because of this, security best practices like 2FA and MFA become unavailable to us.</p>
<p><strong>Issue #5: Federation</strong></p>
<p>For the same reason, we also cannot federate with other companies and applications.</p>
<p>Functionality such as login using a Google account or login using your corporate Azure AD account would not be possible unless the identity provider also used credential sharing – which is highly unlikely in today’s day and age.</p>
<p><strong>Issue #6: Incompatibilities</strong></p>
<p>Collecting external credentials with good intentions is known as <em>benevolent phishing</em>. This method would also restrict what application types we could use. </p>
<p>A single page application served from a cache with no backend server would have no chance of storing these credentials securely.</p>
<h3 id="2-Cookies"><a href="#2-Cookies" class="headerlink" title="(2) Cookies"></a>(2) Cookies</h3>
    <div>
      <img src="/blog/why-oauth/integrate-with-api-3.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>Here we could redirect the user off to the API where they can enter the credentials and get a cookie. This allows the application to access the API and maybe restrict the access by having the user decide what functionality to allow. However, no matter what techniques we come up with, cookies will still be unsuitable because of:</p>
<div align="center">
  <code>Cross-Site Request Forgery (CSRF, aka XSRF)</code>
</div>

<p>When a user logs in to the API, they get a cookie. Now the application can access data on the API. However, if the user opens another tab on the browser, and tries to access the same API, they will still be authorized. This goes for any other application running in the browser as well. So instead of authorizing the application to access our API, we’ve instead authorized the browser - hence opening to a world of pain.</p>
<h3 id="3-API-Keys"><a href="#3-API-Keys" class="headerlink" title="(3) API Keys"></a>(3) API Keys</h3>
    <div>
      <img src="/blog/why-oauth/integrate-with-api-4.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>Here we ask the user to enter a key that was given to them by the API. There are many ways to implement API keys, but we are no longer exposing the user credentials to the application (<del>Impersonation</del>, <del>Exposed user credentials</del>).<br>We also no longer limit what authentication methods we can use in terms of factors (<del>Something you know</del>) and identity provider (<del>Federation</del>).<br>If we allow API keys to be generated per application, we can make key revocation much simpler (<del>Revocation</del>).<br>We can also create mechanisms to restrict permissions associated with each key to scope the key to only what the application needs.<br>However, while API keys solve a lot of problems of credential sharing, it still struggles with applications that cannot keep a secret.<br>So again if you have a single server application with no server backend, then you’re going to have problems keeping this key secure or away from the client device. (<del>Incompatibilities</del>)</p>
<p>API keys also have their own set of issues:</p>
<ul>
<li><strong>No Standards</strong>: API Keys depend on the implementation. There is no standard design method in creating the API key infrastructure.</li>
<li><strong>Expiration</strong>: Long-lived. This is good from a user perspective (since we don’t want to regenerate and redistribute the API keys every few days or weeks). However, the problem is that if the key gets stolen, it could be used indefinitely until discovered.</li>
</ul>
<h3 id="4-OAuth-2-0"><a href="#4-OAuth-2-0" class="headerlink" title="(4) OAuth 2.0"></a>(4) OAuth 2.0</h3><p><em>Finally, the solution we were waiting for.</em></p>
<p>Some facts about OAuth 2.0:</p>
<ul>
<li>It is an authorization framework</li>
<li>Built for HTTP APIs</li>
<li>Has scoped access, meaning that it allows access to only certain parts of the application</li>
<li>Is a delegation protocol, i.e. it allows applications to talk freely to other applications</li>
</ul>
<p>Let’s cover the working of OAuth 2.0 in the next section.</p>
<h2 id="OAuth-2-0-Players"><a href="#OAuth-2-0-Players" class="headerlink" title="OAuth 2.0 Players"></a>OAuth 2.0 Players</h2><div style="clear: both;">
  <div style="float: left; margin-right: 1em;">
    <img src="oauth-protected-resource.jpg" width="100">
  </div>    
  <div>
    <b>Protected Resource (HTTP API)</b>
    <div>This is the user's resource we are trying to protect. It could be any data like Google Photos in the user's account.</div>
  </div>
</div>
<p>
</p><div style="clear: both;">
  <div style="float: left; margin-right: 1em;">
    <img src="oauth-client-application.jpg" width="100">
  </div>    
  <div>
    <b>Client (Requesting Application)</b>
    <div>This is the application that wants to gain access to the user's protected resource present in the domain of another application, and which is provided through HTTP APIs.
    </div>
  </div>
</div>
<p>
</p><div style="clear: both;">
  <div style="float: left; margin-right: 1em;">
    <img src="oauth-resource-owner.jpg" width="100">
  </div>    
  <div>
    <b>Resource Owner (The user)</b>
    <div>The user who owns the protected resource. The protected resource may be an API that a company owns, however in OAuth, the data in the API belongs to the user and it’s theirs to authorize and consent other applications being able to access.</div>
  </div>
</div>
<p>
</p><div style="clear: both;">
  <div style="float: left; margin-right: 1em;">
    <img src="oauth-authorization-server.jpg" width="100">
  </div>    
  <div>
    <b>Authorization Server</b>
    <div>This is responsible for handling auth requests and trusted by all parties involved.</div>
  </div>
</div>

<h2 id="A-typical-OAuth-request-flow"><a href="#A-typical-OAuth-request-flow" class="headerlink" title="A typical OAuth request flow"></a>A typical OAuth request flow</h2><div style="width: 550px; margin: auto;">
    
    <div>
      <img src="/blog/why-oauth/oauth-dance-1.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>
</div>

<p>The client application sends an Authorization Request, which is granted by the Resource Owner. The Resource Owner authenticates itself on the Authorization Server and gives its consent for the application to gain access on the specified resources.</p>
<div style="width: 550px; margin: auto;">
    
    <div>
      <img src="/blog/why-oauth/oauth-dance-2.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>
</div>

<p>The authorization is then granted in the form of an ‘Authorization Grant’, which is nothing but a physical representation of the user’s authorization of the client application to act on their behalf in the form of a random value that only the authorization server understands.</p>
<div style="width: 550px; margin: auto;">
    
    <div>
      <img src="/blog/why-oauth/oauth-dance-3.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>
</div>

<p>The client application then makes a backchannel request away from the browser. In this request it includes</p>
<ol>
<li>the authorization grant it previously received </li>
<li>and also some way of authenticating itself as a valid client</li>
</ol>
<p>If everything checks out, the Authorization Server responds with an Access Token. Only the application that was given the Authorization Grant can swap it for a token.</p>
<div style="width: 550px; margin: auto;">
    
    <div>
      <img src="/blog/why-oauth/oauth-dance-4.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>
</div>

<p>This Access Token can then be used by the client application to authorize requests to the protected resource. This is sent over using the authorization header with the scheme being defined by the Authorization Server. This is typically the <em>bearer scheme</em>, meaning that whoever has the Access Token can use it.</p>
<div style="width: 550px; margin: auto;">
    
    <div>
      <img src="/blog/why-oauth/oauth-dance-5.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>
</div>

<p>When the Protected Resource receives the bearer token, it needs to verify in some way. This is where things get a little hazy as the exact structure of an access token and its validation procedure are again outside of the OAuth specification. It could be: </p>
<ol>
<li>structured data e.g. JSON Web token </li>
<li>or it could be completely unstructured</li>
</ol>
<p>We could verify it within the protected resource, or we could send it to the authorization server to be validated. Either way, the protected resource must verify that the token was issued by the Authorization Server that it trusts, and then be able to understand what user made the delegation and what permissions were delegated. If everything checks out, the client application is allowed access.</p>
<div style="width: 550px; margin: auto;">
    
    <div>
      <img src="/blog/why-oauth/oauth-dance-6.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>
</div>

<p>The client will now get the desired response when it sends the request to the protected resource with the access token.</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>Consider a social coffee application called <em>Unground</em>, which offers the ability for the users to integrate their reward points account from a third-party company called <em>Bitter Brew</em>.</p>
<p>This is how the Unground app looks:</p>

    <div>
      <img src="/blog/why-oauth/oauth-example-1.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>If we call the reward points API without authorization, we get a 401 unauthorized:</p>

    <div>
      <img src="/blog/why-oauth/oauth-example-2.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>Let’s authorize first and see what happens:</p>

    <div>
      <img src="/blog/why-oauth/oauth-example-3.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>We are now redirected to the Bitter Brew authorization server:</p>

    <div>
      <img src="/blog/why-oauth/oauth-example-4.png" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>Once we authenticate, we are given the consent screen:</p>

    <div>
      <img src="/blog/why-oauth/oauth-example-5.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>Here we are being informed of what the client application is trying to do – which in this case is to get read access to the reward points API. We are allowed to deny this request – which would simply stop the authorization process and return us to the client application.</p>
<p>We could pick and choose which permissions to grant, we should not be held hostage to the consent.<br>Once we authorize the client application, we are then returned back to our app.</p>

    <div>
      <img src="/blog/why-oauth/oauth-example-6.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>

<p>The auth grant is then swapped for a token and now Unground can call the rewards API on our behalf. Let’s try it:</p>

    <div>
      <img src="/blog/why-oauth/oauth-example-7.jpg" alt="" data-action="zoom" class="photozoom">
      
    </div>


<h2 id="Final-words"><a href="#Final-words" class="headerlink" title="Final words"></a>Final words</h2><p>OAuth got a lot of things right, by solving complex problems in a simple manner. It solved issues we saw earlier like Delegated Access, API access control, Separation of user &amp; client credentials, and User consent.</p>
<p>That said, a major misconception that should be clarified is that OAuth only solves for <a href="#Authorization">Authorization</a>, and not for <a href="#Authentication">Authentication</a>. If there is a need for identity verification along with OAuth, OpenID Connect is one way popular way that solves the use case.</p>
<hr>
<p><em>That’s it for Part 1 of the series, read the <a href="/blog/oauth-explained/" title="next part here">next part here</a> to go through OAuth in detail.</em> </p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/blog/">Blog</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Authentication"><span class="toc-number">1.1.</span> <span class="toc-text">Authentication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Authorization"><span class="toc-number">1.2.</span> <span class="toc-text">Authorization</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Problem"><span class="toc-number">2.</span> <span class="toc-text">The Problem</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Solutions"><span class="toc-number">3.</span> <span class="toc-text">Solutions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Credential-Sharing"><span class="toc-number">3.1.</span> <span class="toc-text">(1) Credential Sharing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Cookies"><span class="toc-number">3.2.</span> <span class="toc-text">(2) Cookies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-API-Keys"><span class="toc-number">3.3.</span> <span class="toc-text">(3) API Keys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-OAuth-2-0"><span class="toc-number">3.4.</span> <span class="toc-text">(4) OAuth 2.0</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OAuth-2-0-Players"><span class="toc-number">4.</span> <span class="toc-text">OAuth 2.0 Players</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#A-typical-OAuth-request-flow"><span class="toc-number">5.</span> <span class="toc-text">A typical OAuth request flow</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Example"><span class="toc-number">6.</span> <span class="toc-text">Example</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Final-words"><span class="toc-number">7.</span> <span class="toc-text">Final words</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://codecoffeecommit.com/blog/why-oauth/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://codecoffeecommit.com/blog/why-oauth/&amp;text=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://codecoffeecommit.com/blog/why-oauth/&amp;is_video=false&amp;description=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=OAuth for Dummies [Part 1] Why OAuth&amp;body=Check out this article: http://codecoffeecommit.com/blog/why-oauth/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://codecoffeecommit.com/blog/why-oauth/&amp;title=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://codecoffeecommit.com/blog/why-oauth/&amp;name=OAuth for Dummies [Part 1] Why OAuth&amp;description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://codecoffeecommit.com/blog/why-oauth/&amp;t=OAuth for Dummies [Part 1] Why OAuth"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright ©
    
    
    2017-2022
    Deeheem Ansari
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/blog/">Blog</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'">


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-203770300-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-203770300-1');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'codecoffeecommit';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>




<script type="text/javascript">/**
 * Pure JavaScript implementation of zoom.js.
 *
 * Original preamble:
 * zoom.js - It's the best way to zoom an image
 * @version v0.0.2
 * @link https://github.com/fat/zoom.js
 * @license MIT
 *
 * This is a fork of the original zoom.js implementation by @fat.
 * Copyrights for the original project are held by @fat. All other copyright
 * for changes in the fork are held by Nishanth Shanmugham.
 *
 * Copyright (c) 2013 @fat
 * The MIT License. Copyright © 2016 Nishanth Shanmugham.
 */
!function(){"use strict";var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return r}),n.d(e,"d",function(){return a});var i=function(){return document.documentElement.clientWidth},o=function(){return document.documentElement.clientHeight},r=function(t){var e=t.getBoundingClientRect(),n=document.documentElement,i=window;return{top:e.top+i.pageYOffset-n.clientTop,left:e.left+i.pageXOffset-n.clientLeft}},a=function(t,e,n){t.addEventListener(e,function t(i){i.target.removeEventListener(e,t),n()})}},function(t,e,n){var i=n(2),o=n(0);n.d(e,"a",function(){return g});var r=null,a=-1,s=-1,c=function(t){document.body.classList.contains("zoom-overlay-open")||(t.metaKey||t.ctrlKey?window.open(t.target.getAttribute("data-original")||t.target.src,"_blank"):t.target.width>=n.i(o.a)()-80||(u(!0),(r=new i.a(t.target,80)).zoom(),l()))},u=function(t){null!=r&&(t?r.dispose():r.close(),d(),r=null)},l=function(){document.addEventListener("scroll",m),document.addEventListener("keyup",f),document.addEventListener("touchstart",h),document.addEventListener("click",v,!0)},d=function(){document.removeEventListener("scroll",m),document.removeEventListener("keyup",f),document.removeEventListener("touchstart",h),document.removeEventListener("click",v,!0)},m=function(){-1==a&&(a=window.pageYOffset),Math.abs(a-window.pageYOffset)>=40&&u()},f=function(t){27==t.keyCode&&u()},h=function(t){var e=t.touches[0];null!=e&&(s=e.pageY,t.target.addEventListener("touchmove",p))},p=function t(e){var n=e.touches[0];null!=n&&Math.abs(n.pageY-s)>10&&(u(),e.target.removeEventListener("touchmove",t))},v=function(){u()},g=Object.create(null);g.setup=function(t){t.addEventListener("click",c)}},function(n,i,o){var r=o(0),a=function t(n,i){e(this,t),this.w=n,this.h=i},s=function(){function n(t,i){e(this,n),this.img=t,this.preservedTransform=t.style.transform,this.wrap=null,this.caption=null,this.overlay=null,this.offset=i}return t(n,[{key:"forceRepaint",value:function(){this.img.offsetWidth}},{key:"zoom",value:function(){var t=new a(this.img.naturalWidth,this.img.naturalHeight);this.wrap=document.createElement("div"),this.wrap.classList.add("zoom-img-wrap"),this.img.parentNode.insertBefore(this.wrap,this.img),this.wrap.appendChild(this.img),this.img.classList.add("zoom-img"),this.img.setAttribute("data-action","zoom-out"),this.overlay=document.createElement("div"),this.overlay.classList.add("zoom-overlay"),this.caption=document.createElement("span"),this.caption.innerHTML=this.img.getAttribute("alt"),this.caption.classList.add("zoom-caption"),this.overlay.appendChild(this.caption),document.body.appendChild(this.overlay),this.forceRepaint();var e=this.calculateScale(t);this.forceRepaint(),this.animate(e),document.body.classList.add("zoom-overlay-open")}},{key:"calculateScale",value:function(t){var e=t.w/this.img.width,n=o.i(r.a)()-this.offset,i=o.i(r.b)()-this.offset,a=t.w/t.h,s=n/i;return t.w<n&&t.h<i?e:a<s?i/t.h*e:n/t.w*e}},{key:"animate",value:function(t){var e=o.i(r.c)(this.img),n=window.pageYOffset,i=o.i(r.a)()/2,a=n+o.i(r.b)()/2,s="scale("+t+")",c="translate3d("+(i-(e.left+this.img.width/2))+"px, "+(a-(e.top+this.img.height/2))+"px, 0px)";this.img.style.transform=s,this.wrap.style.transform=c}},{key:"dispose",value:function(){null!=this.wrap&&null!=this.wrap.parentNode&&(this.img.classList.remove("zoom-img"),this.img.setAttribute("data-action","zoom"),this.wrap.parentNode.insertBefore(this.img,this.wrap),this.wrap.parentNode.removeChild(this.wrap),document.body.removeChild(this.overlay),document.body.classList.remove("zoom-overlay-transitioning"))}},{key:"close",value:function(){var t=this;document.body.classList.add("zoom-overlay-transitioning"),this.img.style.transform=this.preservedTransform,0===this.img.style.length&&this.img.removeAttribute("style"),this.wrap.style.transform="none",o.i(r.d)(this.img,"transitionend",function(){t.dispose(),document.body.classList.remove("zoom-overlay-open")})}}]),n}();i.a=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);document.addEventListener("DOMContentLoaded",function(){for(var t=document.querySelectorAll("img[data-action='zoom']"),e=0;e<t.length;e++)i.a.setup(t[e])})}])}();</script><style>img[data-action=zoom]{cursor:pointer;cursor:-webkit-zoom-in;cursor:-moz-zoom-in}.zoom-img,.zoom-img-wrap{position:relative;z-index:666;-webkit-transition:all .3s;-o-transition:all .3s;transition:all .3s}img.zoom-img{cursor:pointer;cursor:-webkit-zoom-out;cursor:-moz-zoom-out}.zoom-overlay{z-index:420;text-align:center;background:#fff;position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;filter:"alpha(opacity=0)";opacity:0;-webkit-transition:opacity .3s;-o-transition:opacity .3s;transition:opacity .3s}.zoom-overlay-open .zoom-overlay{filter:"alpha(opacity=100)";opacity:1}.zoom-overlay-open,.zoom-overlay-transitioning{cursor:default}.body-wrap-zoom{width:100vw}.zoom-caption{z-index:667;bottom:10px;position:fixed;left:10px;right:10px}.zoom-initial-caption{color:#999;display:block;font-size:.9em;margin-top:.5em;position:relative;text-align:center;}</style></body></html>