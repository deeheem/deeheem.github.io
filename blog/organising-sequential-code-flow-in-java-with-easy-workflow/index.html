<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="The Philosophy&amp;#x2755; Skip this section if you are not interested in the philosophy of good software engineering, and want to jump straight to the relevant stuff. Software engineering (the art) is an">
<meta property="og:type" content="article">
<meta property="og:title" content="Organising Sequential Code Flow in Java with Easy-Workflow">
<meta property="og:url" content="http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/index.html">
<meta property="og:site_name" content="Code Coffee Commit">
<meta property="og:description" content="The Philosophy&amp;#x2755; Skip this section if you are not interested in the philosophy of good software engineering, and want to jump straight to the relevant stuff. Software engineering (the art) is an">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/SimpleWorkflow.png">
<meta property="og:image" content="http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/ComplexWorkflow.png">
<meta property="og:image" content="http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/RealWorkflow.png">
<meta property="article:published_time" content="2020-12-25T11:21:18.000Z">
<meta property="article:modified_time" content="2022-04-10T08:01:51.253Z">
<meta property="article:author" content="Deeheem Ansari">
<meta property="article:tag" content="#java">
<meta property="article:tag" content="#spring">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/SimpleWorkflow.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Organising Sequential Code Flow in Java with Easy-Workflow</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" "Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/blog/">Blog</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post " href="/blog/5-surprises-to-expect-when-learning-python/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post " href="/blog/upskilling-at-a-time-of-covid-19-lockdown/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top " href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&text=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&is_video=false&description=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Organising Sequential Code Flow in Java with Easy-Workflow&body=Check out this article: http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&name=Organising Sequential Code Flow in Java with Easy-Workflow&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&t=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Philosophy"><span class="toc-number">1.</span> <span class="toc-text">The Philosophy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Lazy-Long-Step-Based-Methods"><span class="toc-number">2.</span> <span class="toc-text">The Lazy, Long Step-Based Methods</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Easy-Workflow-goodbye-long-methods"><span class="toc-number">3.</span> <span class="toc-text">Easy-Workflow - goodbye long methods!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Why"><span class="toc-number">3.1.</span> <span class="toc-text">Why?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#What"><span class="toc-number">3.2.</span> <span class="toc-text">What?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#When-to-use"><span class="toc-number">3.3.</span> <span class="toc-text">When to use?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Requirements"><span class="toc-number">3.4.</span> <span class="toc-text">Requirements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Features"><span class="toc-number">3.5.</span> <span class="toc-text">Features</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Architecture"><span class="toc-number">4.</span> <span class="toc-text">Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Workflow-Engine"><span class="toc-number">4.1.</span> <span class="toc-text">Workflow Engine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Workflow"><span class="toc-number">4.2.</span> <span class="toc-text">Workflow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Activity"><span class="toc-number">4.3.</span> <span class="toc-text">Activity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WorkflowContext"><span class="toc-number">4.4.</span> <span class="toc-text">WorkflowContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WorkflowReport"><span class="toc-number">4.5.</span> <span class="toc-text">WorkflowReport</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WorkflowStatus"><span class="toc-number">4.6.</span> <span class="toc-text">WorkflowStatus</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage"><span class="toc-number">5.</span> <span class="toc-text">Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Simple-Workflow-with-XML-based-Configuration"><span class="toc-number">5.1.</span> <span class="toc-text">Simple Workflow with XML-based Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#beans-xml"><span class="toc-number">5.1.1.</span> <span class="toc-text">beans.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity1-java"><span class="toc-number">5.1.2.</span> <span class="toc-text">Activity1.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity2-java"><span class="toc-number">5.1.3.</span> <span class="toc-text">Activity2.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity3-java"><span class="toc-number">5.1.4.</span> <span class="toc-text">Activity3.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleContext-java"><span class="toc-number">5.1.5.</span> <span class="toc-text">SimpleContext.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleErrorHandler-java"><span class="toc-number">5.1.6.</span> <span class="toc-text">SimpleErrorHandler.java</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Complex-Workflow-with-XML-based-Configuration"><span class="toc-number">5.2.</span> <span class="toc-text">Complex Workflow with XML-based Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#beans-xml-1"><span class="toc-number">5.2.1.</span> <span class="toc-text">beans.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PActivity1-java"><span class="toc-number">5.2.2.</span> <span class="toc-text">PActivity1.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PActivity2-java"><span class="toc-number">5.2.3.</span> <span class="toc-text">PActivity2.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity1-java-1"><span class="toc-number">5.2.4.</span> <span class="toc-text">Activity1.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity2-java-1"><span class="toc-number">5.2.5.</span> <span class="toc-text">Activity2.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity3-java-1"><span class="toc-number">5.2.6.</span> <span class="toc-text">Activity3.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleContext-java-1"><span class="toc-number">5.2.7.</span> <span class="toc-text">SimpleContext.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleErrorHandler-java-1"><span class="toc-number">5.2.8.</span> <span class="toc-text">SimpleErrorHandler.java</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Real-World-Workflow-with-Annotation-based-Configuration"><span class="toc-number">5.3.</span> <span class="toc-text">Real-World Workflow with Annotation-based Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CoffeeNewsletterConfiguration-java"><span class="toc-number">5.3.1.</span> <span class="toc-text">CoffeeNewsletterConfiguration.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CoffeeDetailsActivity-java"><span class="toc-number">5.3.2.</span> <span class="toc-text">CoffeeDetailsActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ParallelDataActivity-java"><span class="toc-number">5.3.3.</span> <span class="toc-text">ParallelDataActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ManufacturerDetailsActivity-java"><span class="toc-number">5.3.4.</span> <span class="toc-text">ManufacturerDetailsActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PriceCalculatorActivity-java"><span class="toc-number">5.3.5.</span> <span class="toc-text">PriceCalculatorActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CustomerPreferenceActivity-java"><span class="toc-number">5.3.6.</span> <span class="toc-text">CustomerPreferenceActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CombineCoffeeDetailsActivity-java"><span class="toc-number">5.3.7.</span> <span class="toc-text">CombineCoffeeDetailsActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SaveActivity-java"><span class="toc-number">5.3.8.</span> <span class="toc-text">SaveActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ThisWorkflowContext-java"><span class="toc-number">5.3.9.</span> <span class="toc-text">ThisWorkflowContext.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ParallelErrorHandler-java"><span class="toc-number">5.3.10.</span> <span class="toc-text">ParallelErrorHandler.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FallbackErrorHandler-java"><span class="toc-number">5.3.11.</span> <span class="toc-text">FallbackErrorHandler.java</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Starting-Workflow-Execution"><span class="toc-number">5.4.</span> <span class="toc-text">Starting Workflow Execution</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Inabilities"><span class="toc-number">6.</span> <span class="toc-text">The Inabilities</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#State-Persistence"><span class="toc-number">6.1.</span> <span class="toc-text">State Persistence</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Manual-Intervention"><span class="toc-number">6.2.</span> <span class="toc-text">Manual Intervention</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Distributed-Workflow"><span class="toc-number">6.3.</span> <span class="toc-text">Distributed Workflow</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Final-Words"><span class="toc-number">7.</span> <span class="toc-text">Final Words</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Organising Sequential Code Flow in Java with Easy-Workflow
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Deeheem Ansari</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-12-25T11:21:18.000Z" itemprop="datePublished">2020-12-25</time>
        
      
    </div>


      <span class="article-time">
        <i class="fa fa-clock"></i>
        27 min read
      </span>
      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Programming/">Programming</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/java/" rel="tag">#java</a>, <a class="tag-link-link" href="/tags/spring/" rel="tag">#spring</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="The-Philosophy"><a href="#The-Philosophy" class="headerlink" title="The Philosophy"></a>The Philosophy</h2><p><em><span class="github-emoji" alias="grey_exclamation" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2755.png?v8">&#x2755;</span> Skip this section if you are not interested in the philosophy of good software engineering, and want to jump straight to the relevant stuff.</em></p>
<p>Software engineering <em>(the art)</em> is an interesting space in many aspects. One such aspect is the fact that the same tools can be used to solve a myriad of problems. To solve these problems, there can be numerous ways, none being perfect. At the same time, every solution has scope for improvement.</p>
<p>Software engineers’ <em>(the artist)</em> task is to take care of all these trade-offs and select the best approach to solve the business use-cases in a reasonable time, along with taking care of the software best practices along the way.</p>
<p>Enough of philosophy. Let’s get to the point now.</p>
<h2 id="The-Lazy-Long-Step-Based-Methods"><a href="#The-Lazy-Long-Step-Based-Methods" class="headerlink" title="The Lazy, Long Step-Based Methods"></a>The Lazy, Long Step-Based Methods</h2><p>Most of us may have come across situations where we need to implement algorithms that are sequential in manner. They simply require you to implement step 1, then step 2 and so on.</p>
<p>A naive implementation can simply have a method that handles all the steps. You can already see this method bloating, forget about its future maintenance.</p>
<p>In a relatively more mature implementation, the method call will be broken down into sub-methods, and the code may look something like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeAlgorithm</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runAlgorithm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        performStep1();</span><br><span class="line">        performStep2();</span><br><span class="line">        performStep3();</span><br><span class="line">        <span class="comment">// and so on...</span></span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">performStep1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">performStep2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">performStep3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Okay still better. But <em>(if you read the philosophy section above)</em>, no solution is perfect. Do you see where this approach can go wrong?</p>
<p>Let’s take an example. Suppose <code>performStep1()</code> requires you to gather data from some third party application, and then in the rest of the steps you are actually performing the algorithm. Maybe in one of the last few steps you want to write to the database. See what’s happening? This class is now handling so many things apart from the algorithm itself. <em>Separation of concerns?</em> Boom. Lost. </p>
<p>Hmm. So what can we do about it? Maybe we start thinking in terms of Object Oriented Principles and create different classes for each of these not-so-related tasks. This approach does make sense but only to the extent in which you were dealing with such a scenario once or twice in an application.</p>
<p>What if you expect the implementation of such algorithms at many places inside the codebase? So many classes, each handling different logic; but still kind of similar be a part of one single long-running algorithm. Feels chaotic already?</p>
<p>That’s where you need to start considering such problems as long-running tasks, which will not only help in doing away with bloated classes but also managing the algorithms in a streamlined manner. </p>
<p>This was one such problem I faced recently, and this article is about how I went on looking at these problems as “workflows” and creating a common solution for implementing them. I created a solution which I call the “Easy-Workflow”.</p>
<h2 id="Easy-Workflow-goodbye-long-methods"><a href="#Easy-Workflow-goodbye-long-methods" class="headerlink" title="Easy-Workflow - goodbye long methods!"></a>Easy-Workflow - goodbye long methods!</h2><h3 id="Why"><a href="#Why" class="headerlink" title="Why?"></a>Why?</h3><p>Many Java enterprise applications require processing to be executed in a context separate from that of the main system. In many cases, these backend processes perform several tasks, with some tasks dependent upon a previous task’s status. With the requirement of interdependent processing tasks, an implementation using a single procedural-style set of method calls usually proves inadequate. Utilizing Spring, a developer can easily separate a backend process into an aggregation of activities. Easy-Workflow helps to streamline this process.</p>
<h3 id="What"><a href="#What" class="headerlink" title="What?"></a>What?</h3><p>Easy-Workflow aims to make sequential and/or parallel execution of independent yet related activities in a more organized manner. It lets you define your desired workflow with independent activities. The definition of these activities can be provided by the client as per business needs. It comes with functionality such as contexts and customizable error handlers.</p>
<h3 id="When-to-use"><a href="#When-to-use" class="headerlink" title="When to use?"></a>When to use?</h3><p>In Easy-Workflow’s jargon, a workflow can be defined as a set of activities performed in a predetermined order without user interaction.</p>
<p>This approach, however, is not suggested as a replacement for existing workflow frameworks. For scenarios where more advanced interactions are necessarily based on user input, a standalone open-source or commercial workflow engine is better equipped.</p>
<p>If the workflow tasks at hand are simplistic, then the Easy-Workflow approach makes more sense, especially if Spring is already in use.</p>
<h3 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h3><ul>
<li>Java</li>
<li>Spring</li>
<li>Easy-Workflow JAR</li>
</ul>
<h3 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h3><ul>
<li>Interact with Spring using both XML-based Configuration and Annotation-based Configuration</li>
<li>Pass information between activities using <em>WorkflowContext</em></li>
<li>Customize <em>ErrorHandlers</em> at a per-activity level as well as a default-workflow level</li>
<li>Get detailed <em>WorkflowReport</em> once execution of Workflow is over</li>
</ul>
<h2 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h2><p>Easy-Workflow consists of the following components:</p>
<h3 id="Workflow-Engine"><a href="#Workflow-Engine" class="headerlink" title="Workflow Engine"></a>Workflow Engine</h3><p>A place to kick-start your workflow.</p>
<h3 id="Workflow"><a href="#Workflow" class="headerlink" title="Workflow"></a>Workflow</h3><p>A set of activities performed in a predetermined order without user interaction. The activities can be configured to either run in sequence, or in parallel, or using a hybrid approach.</p>
<h3 id="Activity"><a href="#Activity" class="headerlink" title="Activity"></a>Activity</h3><p>A single unit of work that can be performed independently. This is where the business logic needs to be defined.</p>
<h3 id="WorkflowContext"><a href="#WorkflowContext" class="headerlink" title="WorkflowContext"></a>WorkflowContext</h3><p>A utility to pass around information between different activities of a workflow. It can also be used to provide a seed to the first activity of the workflow.</p>
<h3 id="WorkflowReport"><a href="#WorkflowReport" class="headerlink" title="WorkflowReport"></a>WorkflowReport</h3><p>A unit that gives all details about how the workflow finished and contains any messages/errors to be returned to the caller.</p>
<h3 id="WorkflowStatus"><a href="#WorkflowStatus" class="headerlink" title="WorkflowStatus"></a>WorkflowStatus</h3><p>An enum to represent the status in which the workflow could have ended like completed, failed, stopped, or no operation.</p>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><h3 id="Simple-Workflow-with-XML-based-Configuration"><a href="#Simple-Workflow-with-XML-based-Configuration" class="headerlink" title="Simple Workflow with XML-based Configuration"></a>Simple Workflow with XML-based Configuration</h3><p>Let’s take an example of a very simple workflow where three activities run in a sequential manner, and any error encountered while running these activities needs to be handled gracefully. We will explore the implementation with the help of an XML-based configuration. </p>
<p><img src="/blog/organising-sequential-code-flow-in-java-with-easy-workflow/SimpleWorkflow.png"></p>
<h4 id="beans-xml"><a href="#beans-xml" class="headerlink" title="beans.xml"></a>beans.xml</h4><p>This is the starting point of the workflow, where the bean definitions, as well as the workflow definition, is provided. In the first few lines, we have the bean definitions of <code>Activity1</code>, <code>Activity2</code>, <code>Activity3</code> along with <code>SimpleErrorHandler</code> and <code>SimpleContext</code>. Here, activities are custom implementations that will contain the business logic, and <code>SimpleErrorHandler</code> and <code>SimpleContext</code> are very basic implementations of <em>ErrorHandler</em> and <em>WorkflowContext</em>, respectively.</p>
<p>In the latter half of the code, we can see the definition of the workflow. The property <code>activities</code> is a list that actually defines all the activities (beans) that will run. They run in the order of the sequence defined in this list. This is the section which ties all the components of a workflow together, hence the mapping of <em>ErrorHandler</em> and <em>WorkflowContext</em> beans also exists here.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;activity1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.simple.Activity1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;activity2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.simple.Activity2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;activity3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.simple.Activity3&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;defaultErrorHandler&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.simple.SimpleErrorHandler&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;simpleContext&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.simple.SimpleContext&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- simple workflow  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;simpleWorkflow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.deeheem.easyworkflow.domain.workflow.DefaultWorkflow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;activities&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;activity1&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;activity2&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;activity3&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultErrorHandler&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;defaultErrorHandler&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;workflowContext&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;simpleContext&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Activity1-java"><a href="#Activity1-java" class="headerlink" title="Activity1.java"></a>Activity1.java</h4><p>Notice that the activities need to extend <code>BaseActivity</code> class which implements the interface <code>Activity</code>. <code>Base Activity</code> is an abstract implementation of <code>Activity</code> designed for re-use by business-specific activities. Both <code>BaseActivity</code> and <code>Activity</code> are present in the Easy-Workflow JAR itself.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Activity1</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// business logic goes here</span></span><br><span class="line">        System.out.println(<span class="string">&quot;EXECUTE Activity1&quot;</span>);</span><br><span class="line">        SimpleContext simpleContext = (SimpleContext) context;</span><br><span class="line">        simpleContext.put(<span class="string">&quot;message1&quot;</span>, <span class="string">&quot;Data from Activity1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Activity2-java"><a href="#Activity2-java" class="headerlink" title="Activity2.java"></a>Activity2.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Activity2</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// business logic goes here</span></span><br><span class="line">        System.out.println(<span class="string">&quot;EXECUTE Activity2&quot;</span>);</span><br><span class="line">        SimpleContext simpleContext = (SimpleContext) context;</span><br><span class="line">        simpleContext.put(<span class="string">&quot;message2&quot;</span>, <span class="string">&quot;Data from Activity2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Activity3-java"><a href="#Activity3-java" class="headerlink" title="Activity3.java"></a>Activity3.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Activity3</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// business logic goes here</span></span><br><span class="line">        System.out.println(<span class="string">&quot;EXECUTE Activity3&quot;</span>);</span><br><span class="line">        SimpleContext simpleContext = (SimpleContext) context;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : simpleContext.getEntrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey() + <span class="string">&quot;: &quot;</span> + entry.getValue());</span><br><span class="line">            System.out.println(entry.getKey() + <span class="string">&quot;: &quot;</span> + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// uncomment the below line to invoke the error handler</span></span><br><span class="line">        <span class="comment">// throw new Exception(&quot;let&#x27;s see the error&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="SimpleContext-java"><a href="#SimpleContext-java" class="headerlink" title="SimpleContext.java"></a>SimpleContext.java</h4><p>SimpleContext implements the interface <code>WorkflowContext</code> provided in the Easy-Workflow JAR. </p>
<ul>
<li><code>setSeedData()</code> method can be used to provide information to the workflow at the time of kickoff, which may be required by other activities during the workflow run.</li>
<li><code>shouldWorkflowStop()</code> method is used by individual activities to inform the workflow to stop processing further due to some requirement/condition reached in the business logic. Note that this is <strong>not the same as</strong> the ability of the error handler to stop the workflow in case an error is encountered (something we will see in the next section). Instead, this particular function is used for handling business logic conditions rather than error scenarios.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleContext</span> <span class="keyword">implements</span> <span class="title">WorkflowContext</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SEED_DATA = <span class="string">&quot;seedData&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AtomicBoolean stopProcess;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Object&gt; context = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;(); <span class="comment">// to make it thread-safe</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSeedData</span><span class="params">(Object seedObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.put(SEED_DATA, seedObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AtomicBoolean <span class="title">shouldWorkflowStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stopProcess;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStopProcess</span><span class="params">(AtomicBoolean stopProcess)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.stopProcess = stopProcess;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(String key, Object value)</span> </span>&#123;</span><br><span class="line">        context.put(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> context.get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Map.Entry&lt;String, Object&gt;&gt; getEntrySet() &#123;</span><br><span class="line">        <span class="keyword">return</span> context.entrySet();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="SimpleErrorHandler-java"><a href="#SimpleErrorHandler-java" class="headerlink" title="SimpleErrorHandler.java"></a>SimpleErrorHandler.java</h4><p>SimpleErrorHandler implements the interface <code>ErrorHandler</code> provided in the Easy-Workflow JAR, which defines a strategy for handling errors/exceptions which may arise during the execution of an activity.  </p>
<ul>
<li><code>handleError()</code> handles the given error, possibly rethrowing it as a fatal exception.</li>
<li>It is up to the developer to decide how to handle the error inside this method.</li>
<li>This method can also be used to handle errors from composite activities like <code>ConcurrentActivity</code> (discussed in upcoming sections).</li>
<li>If you notice, the return type of this method is <code>boolean</code>. This specifies whether the execution of workflow needs to be stopped on encountering an error, and can be customized by the developer implementing the business logic based on the needs.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleErrorHandler</span> <span class="keyword">implements</span> <span class="title">ErrorHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String beanName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handleError</span><span class="params">(WorkflowContext context, Exception exception)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBeanName</span><span class="params">(String beanName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.beanName = beanName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Complex-Workflow-with-XML-based-Configuration"><a href="#Complex-Workflow-with-XML-based-Configuration" class="headerlink" title="Complex Workflow with XML-based Configuration"></a>Complex Workflow with XML-based Configuration</h3><p>Now let’s take a more complicated example consisting of parallel activity runs, in a combination with some activities which run in sequence.</p>
<p><img src="/blog/organising-sequential-code-flow-in-java-with-easy-workflow/ComplexWorkflow.png"></p>
<p>As shown in the diagram above, two activities run in parallel and once both of them have completed their execution, the flow then passes to the other two activities. Notice that the error handlers are different for concurrent and sequential executions.</p>
<p>On a side note, you can also define your own custom error handler on as many of the activities as you like.</p>
<h4 id="beans-xml-1"><a href="#beans-xml-1" class="headerlink" title="beans.xml"></a>beans.xml</h4><p>Similar to the previous example, this is the starting point of the workflow. Let’s focus on the special beans here.</p>
<p><code>c_activity1</code> represents Activity 1 which runs two sub-activities concurrently. We define these sub-activities inside the property <code>parallelActivities</code> as list, although note that the order inside this list does not matter during execution since the beans in the list <code>c_pActivity1</code> and <code>c_pActivity2</code> will run in parallel.</p>
<p>Inside the workflow definition, we have defined activities <code>c_activity1</code>, <code>c_activity2</code> and <code>c_activity3</code> to run in sequence, hence completing our objective of running the workflow as per the diagram.</p>
<p>Note that in the case of complex workflows with concurrent activities, we have the option to define the <code>maxThreadPoolSize</code> to control how many threads at the maximum do we want to spawn during the workflow run.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;c_pActivity1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.complex.PActivity1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;c_pActivity2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.complex.PActivity2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;c_activity1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.complex.Activity1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;parallelActivities&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;c_pActivity1&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;c_pActivity2&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;errorHandler&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;c_concurrentErrorHandler&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;c_activity2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.complex.Activity2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;c_activity3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.complex.Activity3&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;c_defaultErrorHandler&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.complex.SimpleErrorHandler&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;c_concurrentErrorHandler&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.complex.ConcurrentErrorHandler&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;c_simpleContext&quot;</span> <span class="attr">class</span>=<span class="string">&quot;deeheem.coffeestore.examples.complex.SimpleContext&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- complex workflow  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;complexWorkflow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.deeheem.easyworkflow.domain.workflow.DefaultWorkflow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;activities&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;c_activity1&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;c_activity2&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;c_activity3&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultErrorHandler&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;c_defaultErrorHandler&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;workflowContext&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;c_simpleContext&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxThreadPoolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="PActivity1-java"><a href="#PActivity1-java" class="headerlink" title="PActivity1.java"></a>PActivity1.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PActivity1</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;EXECUTE PActivity1&quot;</span>);</span><br><span class="line">        SimpleContext simpleContext = (SimpleContext) context;</span><br><span class="line">        simpleContext.put(<span class="string">&quot;message1&quot;</span>, <span class="string">&quot;Data from PActivity1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// note: uncomment below lines to see how exception is handled in parallel activities</span></span><br><span class="line">        <span class="comment">//        int b=0;</span></span><br><span class="line">        <span class="comment">//        try &#123;</span></span><br><span class="line">        <span class="comment">//            int c = 10 / b;</span></span><br><span class="line">        <span class="comment">//        &#125; catch (Exception e) &#123;</span></span><br><span class="line">        <span class="comment">//            System.out.println(&quot;test exception&quot;);</span></span><br><span class="line">        <span class="comment">//            throw new Exception(&quot;test exception&quot;, e);</span></span><br><span class="line">        <span class="comment">//        &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="PActivity2-java"><a href="#PActivity2-java" class="headerlink" title="PActivity2.java"></a>PActivity2.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PActivity2</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;EXECUTE PActivity2&quot;</span>);</span><br><span class="line">        SimpleContext simpleContext = (SimpleContext) context;</span><br><span class="line">        simpleContext.put(<span class="string">&quot;message2&quot;</span>, <span class="string">&quot;Data from PActivity2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Activity1-java-1"><a href="#Activity1-java-1" class="headerlink" title="Activity1.java"></a>Activity1.java</h4><p>Note that <code>Activity1</code> needs to extend <code>ConcurrentActivity</code> in order to support concurrent execution of the sub-activities.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Activity1</span> <span class="keyword">extends</span> <span class="title">ConcurrentActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;EXECUTE Activity1&quot;</span>);</span><br><span class="line">        SimpleContext simpleContext = (SimpleContext) context;</span><br><span class="line">        simpleContext.put(<span class="string">&quot;message1&quot;</span>, <span class="string">&quot;Data from Activity1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Activity2-java-1"><a href="#Activity2-java-1" class="headerlink" title="Activity2.java"></a>Activity2.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Activity2</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;EXECUTE Activity2&quot;</span>);</span><br><span class="line">        SimpleContext simpleContext = (SimpleContext) context;</span><br><span class="line">        simpleContext.put(<span class="string">&quot;message2&quot;</span>, <span class="string">&quot;Data from Activity2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Activity3-java-1"><a href="#Activity3-java-1" class="headerlink" title="Activity3.java"></a>Activity3.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Activity3</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;EXECUTE Activity3&quot;</span>);</span><br><span class="line">        SimpleContext simpleContext = (SimpleContext) context;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : simpleContext.getEntrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey() + <span class="string">&quot;: &quot;</span> + entry.getValue());</span><br><span class="line">            System.out.println(entry.getKey() + <span class="string">&quot;: &quot;</span> + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//   throw new Exception(&quot;let&#x27;s see the error&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="SimpleContext-java-1"><a href="#SimpleContext-java-1" class="headerlink" title="SimpleContext.java"></a>SimpleContext.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleContext</span> <span class="keyword">implements</span> <span class="title">WorkflowContext</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SEED_DATA = <span class="string">&quot;seedData&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AtomicBoolean stopProcess;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Object&gt; context = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;(); <span class="comment">// to make it thread-safe</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSeedData</span><span class="params">(Object seedObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.put(SEED_DATA, seedObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AtomicBoolean <span class="title">shouldWorkflowStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stopProcess;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStopProcess</span><span class="params">(AtomicBoolean stopProcess)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.stopProcess = stopProcess;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(String key, Object value)</span> </span>&#123;</span><br><span class="line">        context.put(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> context.get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Map.Entry&lt;String, Object&gt;&gt; getEntrySet() &#123;</span><br><span class="line">        <span class="keyword">return</span> context.entrySet();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="SimpleErrorHandler-java-1"><a href="#SimpleErrorHandler-java-1" class="headerlink" title="SimpleErrorHandler.java"></a>SimpleErrorHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleErrorHandler</span> <span class="keyword">implements</span> <span class="title">ErrorHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String beanName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handleError</span><span class="params">(WorkflowContext context, Exception exception)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBeanName</span><span class="params">(String beanName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.beanName = beanName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Real-World-Workflow-with-Annotation-based-Configuration"><a href="#Real-World-Workflow-with-Annotation-based-Configuration" class="headerlink" title="Real-World Workflow with Annotation-based Configuration"></a>Real-World Workflow with Annotation-based Configuration</h3><p><em><span class="github-emoji" alias="grey_exclamation" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2755.png?v8">&#x2755;</span> Disclaimer: The example in this section, even though termed as a “Real-World Workflow”, is still fictional and may not directly apply to suit similar use-cases.</em></p>
<p>Imagine you are a developer of an app for a store specializing in different types of coffee. The store curates the best coffee from all over the world, and customers have the ability to subscribe to a monthly newsletter from where they can try out a new type of coffee every month. You, being very particular about the preferences of each customer, want the newsletter to be customised to each customer. <em>(Before we digress, we are not going the Machine Learning way. This is NOT an article on Machine Learning.)</em> </p>
<p>Now as always, the problem has many nuances and can be solved in multiple ways. Let’s explore one such way a typical store might want to solve it: from all the coffee available at the store, enhance the existing data with customer’s preferences, manufacturer details, tailored prices, and then save the details for notifying the customers at a relevant point in time.</p>
<p>If we think of the Easy-Workflow approach, we can easily break down the problem in the following way:</p>
<p><img src="/blog/organising-sequential-code-flow-in-java-with-easy-workflow/RealWorkflow.png"></p>
<p>Makes sense? </p>
<p>Note that whenever you trying to break down the problem into a flowchart like this to make use of Easy-Workflow, make sure that you create a Directed Acyclic Graph (DAG).</p>
<h4 id="CoffeeNewsletterConfiguration-java"><a href="#CoffeeNewsletterConfiguration-java" class="headerlink" title="CoffeeNewsletterConfiguration.java"></a>CoffeeNewsletterConfiguration.java</h4><p>Let’s see how we can create the beans for this application using annotation-based approach.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoffeeNewsletterConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ---- Error Handlers ----</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;parallelErrorHandler&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ErrorHandler <span class="title">parallelErrorHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ParallelErrorHandler();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;fallbackErrorHandler&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ErrorHandler <span class="title">fallbackErrorHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> FallbackErrorHandler();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ---- Activities ----</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;activity_A&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BaseActivity <span class="title">coffeeDetailsActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CoffeeDetailsActivity();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;activity_B1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BaseActivity <span class="title">manufacturerDetailsActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ManufacturerDetailsActivity();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean(value = &quot;activity_B2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BaseActivity <span class="title">priceCalculatorActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PriceCalculatorActivity();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;activity_B3&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BaseActivity <span class="title">customerPreferenceActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CustomerPreferenceActivity();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;activity_B&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BaseActivity <span class="title">parallelDataActivity</span><span class="params">(<span class="meta">@Qualifier(&quot;activity_B1&quot;)</span> BaseActivity activityA,</span></span></span><br><span class="line"><span class="params"><span class="function">                                            <span class="meta">@Qualifier(&quot;activity_B2&quot;)</span> BaseActivity activityB,</span></span></span><br><span class="line"><span class="params"><span class="function">                                            <span class="meta">@Qualifier(&quot;activity_B3&quot;)</span> BaseActivity activityC,</span></span></span><br><span class="line"><span class="params"><span class="function">                                            <span class="meta">@Qualifier(&quot;parallelErrorHandler&quot;)</span> ErrorHandler errorHandler)</span> </span>&#123;</span><br><span class="line">        List&lt;BaseActivity&gt; activities = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        activities.add(activityA);</span><br><span class="line">        activities.add(activityB);</span><br><span class="line">        activities.add(activityC);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ParallelDataActivity(activities, errorHandler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;activity_C&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BaseActivity <span class="title">combineCoffeeDetailsActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CombineCoffeeDetailsActivity();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;activity_D&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BaseActivity <span class="title">saveActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SaveActivity();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ---- Context ----</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;workflowContext&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WorkflowContext <span class="title">workflowContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ThisWorkflowContext();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ---- Workflow ----</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DefaultWorkflow <span class="title">coffeeNewsletterWorkflow</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@Qualifier(&quot;workflowContext&quot;)</span> WorkflowContext workflowContext,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@Qualifier(&quot;fallbackErrorHandler&quot;)</span> ErrorHandler errorHandler,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@Qualifier(&quot;activity_A&quot;)</span> BaseActivity activityA,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@Qualifier(&quot;activity_B&quot;)</span> BaseActivity activityB,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@Qualifier(&quot;activity_C&quot;)</span> BaseActivity activityC,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="meta">@Qualifier(&quot;activity_D&quot;)</span> BaseActivity activityD)</span> </span>&#123;</span><br><span class="line">        List&lt;Activity&gt; activityList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        activityList.add(activityA);</span><br><span class="line">        activityList.add(activityB);</span><br><span class="line">        activityList.add(activityC);</span><br><span class="line">        activityList.add(activityD);</span><br><span class="line"></span><br><span class="line">        DefaultWorkflow defaultWorkflow = <span class="keyword">new</span> DefaultWorkflow();</span><br><span class="line">        defaultWorkflow.setActivities(activityList);</span><br><span class="line">        defaultWorkflow.setDefaultErrorHandler(errorHandler);</span><br><span class="line">        defaultWorkflow.setWorkflowContext(workflowContext);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> defaultWorkflow;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Notice that <code>ParallelErrorHandler</code> is being used for handling errors occurring in the concurrent execution, i.e. inside the bean definition <code>activity_B</code>. Also <code>FallbackErrorHandler</code> is the common handler which the workflow uses across all activities.</p>
<h4 id="CoffeeDetailsActivity-java"><a href="#CoffeeDetailsActivity-java" class="headerlink" title="CoffeeDetailsActivity.java"></a>CoffeeDetailsActivity.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoffeeDetailsActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    CoffeeDetailsFetcherService coffeeDetailsFetcherService; <span class="comment">// to fetch coffee details from DB</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside CoffeeDetailsActivity&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Starting Coffee Sync&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            coffeeDetailsFetcherService.fetchCoffee();</span><br><span class="line">            <span class="comment">// rest of business logic here</span></span><br><span class="line">            <span class="comment">// <span class="doctag">NOTE:</span> you can pass on the data from this activity to the rest of the activities through the &quot;context&quot;, the implementation of which can be customized as per the needs. It can contains any data structures that will fit the business needs.</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Error in syncing coffee.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Coffee Sync completed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ParallelDataActivity-java"><a href="#ParallelDataActivity-java" class="headerlink" title="ParallelDataActivity.java"></a>ParallelDataActivity.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParallelDataActivity</span> <span class="keyword">extends</span> <span class="title">ConcurrentActivity</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ParallelDataActivity</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            List&lt;BaseActivity&gt; parallelActivities,</span></span></span><br><span class="line"><span class="params"><span class="function">            ErrorHandler errorHandler)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setParallelActivities(parallelActivities);</span><br><span class="line">        <span class="keyword">this</span>.setErrorHandler(errorHandler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside GetParallelDataActivity&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ManufacturerDetailsActivity-java"><a href="#ManufacturerDetailsActivity-java" class="headerlink" title="ManufacturerDetailsActivity.java"></a>ManufacturerDetailsActivity.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ManufacturerDetailsActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside ManufacturerDetailsActivity&quot;</span>);</span><br><span class="line">        <span class="comment">// logic to get the manufacturer details and append it with the coffee details present in the context</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="PriceCalculatorActivity-java"><a href="#PriceCalculatorActivity-java" class="headerlink" title="PriceCalculatorActivity.java"></a>PriceCalculatorActivity.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PriceCalculatorActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside PriceCalculatorActivity&quot;</span>);</span><br><span class="line">        <span class="comment">// logic to tailor the price on various factors like place of origin, manufacturer details, profit margin, etc.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="CustomerPreferenceActivity-java"><a href="#CustomerPreferenceActivity-java" class="headerlink" title="CustomerPreferenceActivity.java"></a>CustomerPreferenceActivity.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerPreferenceActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside CustomerPreferenceActivity&quot;</span>);</span><br><span class="line">        <span class="comment">// logic to integrate the information as per customer preferences according to the requirements</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="CombineCoffeeDetailsActivity-java"><a href="#CombineCoffeeDetailsActivity-java" class="headerlink" title="CombineCoffeeDetailsActivity.java"></a>CombineCoffeeDetailsActivity.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CombineCoffeeDetailsActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside CombineCoffeeDetailsActivity&quot;</span>);</span><br><span class="line">        <span class="comment">// logic to get all the data from the previous activities and combine it as per the needs</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="SaveActivity-java"><a href="#SaveActivity-java" class="headerlink" title="SaveActivity.java"></a>SaveActivity.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SaveActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(WorkflowContext context)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside SaveActivity&quot;</span>);</span><br><span class="line">        <span class="comment">// logic to save the processed information so that it can be sent to the customers at an appropriate time</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ThisWorkflowContext-java"><a href="#ThisWorkflowContext-java" class="headerlink" title="ThisWorkflowContext.java"></a>ThisWorkflowContext.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThisWorkflowContext</span> <span class="keyword">implements</span> <span class="title">WorkflowContext</span> </span>&#123;</span><br><span class="line">    <span class="comment">// as mentioned earlier, the data structures inside the context are totally customizable </span></span><br><span class="line">    <span class="comment">// some example are:</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;CoffeeDetail&gt; coffeeDetails;</span><br><span class="line">    <span class="keyword">private</span> List&lt;ManufacturerDetail&gt; manufacturerDetails;</span><br><span class="line">    <span class="comment">// note that this data is in-memory and is used to pass to other activities.</span></span><br><span class="line">    <span class="comment">// data used locally in one activity need not be present inside the context.</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// getters and setters for above...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AtomicBoolean <span class="title">shouldWorkflowStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>; <span class="comment">// true as we cannot tolerate any errors in any activity, and would ideally like the workflow to be stopped in case of errors</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSeedData</span><span class="params">(Object seedObject)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// here we can seed the workflow with any external data if we want, and then utilize the seed data in any of the activities</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ParallelErrorHandler-java"><a href="#ParallelErrorHandler-java" class="headerlink" title="ParallelErrorHandler.java"></a>ParallelErrorHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParallelErrorHandler</span> <span class="keyword">implements</span> <span class="title">ErrorHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handleError</span><span class="params">(WorkflowContext context, Exception exception)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBeanName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="FallbackErrorHandler-java"><a href="#FallbackErrorHandler-java" class="headerlink" title="FallbackErrorHandler.java"></a>FallbackErrorHandler.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FallbackErrorHandler</span> <span class="keyword">implements</span> <span class="title">ErrorHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handleError</span><span class="params">(WorkflowContext context, Exception exception)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBeanName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Starting-Workflow-Execution"><a href="#Starting-Workflow-Execution" class="headerlink" title="Starting Workflow Execution"></a>Starting Workflow Execution</h3><p>Starting a workflow execution is as simple as creating a <em>WorkflowEngine</em> and seeding it with:</p>
<ul>
<li>the workflow to be run</li>
<li>any seed data to be sent from the outside world</li>
</ul>
<p><code>DefaultWorkflowEngine</code> is a default implementation of <em>WorkflowEngine</em> provided inside the Easy-Workflow JAR.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WorkflowController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    Workflow coffeeNewsletterWorkflow;</span><br><span class="line">    </span><br><span class="line">    DefaultWorkflowEngine engine = <span class="keyword">new</span> WorkflowEngine();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">generateCoffeeNewsletter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        WorkflowReport report = engine.run(</span><br><span class="line">            coffeeNewsletterWorkflow, </span><br><span class="line">            <span class="keyword">null</span> <span class="comment">// replace with seed data you want to send to the workflow </span></span><br><span class="line">        );   </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// retrieve status of workflow using:</span></span><br><span class="line">        report.getStatus();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// retrieve completion/failure message using:</span></span><br><span class="line">        report.getMessage();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// retrieve Throwable object in case of an error using:</span></span><br><span class="line">        report.getError();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// access workflowContext using:</span></span><br><span class="line">        report.getWorkflowContext();</span><br><span class="line">        <span class="comment">// above makes it possible to use context for sending the processed data to the outside workflow</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="The-Inabilities"><a href="#The-Inabilities" class="headerlink" title="The Inabilities"></a>The Inabilities</h2><p>Just like any software is not suitable for all the needs, Easy-Workflow is no exception. Though it is totally extendable for some more scenarios.</p>
<h3 id="State-Persistence"><a href="#State-Persistence" class="headerlink" title="State Persistence"></a>State Persistence</h3><p>Easy-Workflow maintains an in-memory state for now. This can be persisted after every activity which can reap up more benefits like:</p>
<ul>
<li>restarting the workflow mid-way</li>
<li>monitoring execution and analysing at a more granular level</li>
</ul>
<h3 id="Manual-Intervention"><a href="#Manual-Intervention" class="headerlink" title="Manual Intervention"></a>Manual Intervention</h3><p>Easy-Workflow is not suitable for workflows requiring manual intervention in some of the activities like pausing -&gt; noti<br>fying stakeholders -&gt; seeking approvals -&gt; then continuing the rest of the workflow on getting the approvals.</p>
<h3 id="Distributed-Workflow"><a href="#Distributed-Workflow" class="headerlink" title="Distributed Workflow"></a>Distributed Workflow</h3><p>Easy-Workflow runs the workflow on a single machine as of now. So to deal with larger data, it can be enhanced so that the activities run on different machines and the workflow can be controlled in a more distributed fashion.</p>
<p>Having said that, enhancing Easy-Workflow to solve for distributed use-cases steals our initial purpose: it’s not easy anymore! :)</p>
<h2 id="Final-Words"><a href="#Final-Words" class="headerlink" title="Final Words"></a>Final Words</h2><p>Do you now see how we were able to achieve separation of concerns in a concise and organized manner? Personally, my OCD with clean code definitely got much better when I implemented this to solve one of very complex business use-cases at work!</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/blog/">Blog</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Philosophy"><span class="toc-number">1.</span> <span class="toc-text">The Philosophy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Lazy-Long-Step-Based-Methods"><span class="toc-number">2.</span> <span class="toc-text">The Lazy, Long Step-Based Methods</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Easy-Workflow-goodbye-long-methods"><span class="toc-number">3.</span> <span class="toc-text">Easy-Workflow - goodbye long methods!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Why"><span class="toc-number">3.1.</span> <span class="toc-text">Why?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#What"><span class="toc-number">3.2.</span> <span class="toc-text">What?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#When-to-use"><span class="toc-number">3.3.</span> <span class="toc-text">When to use?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Requirements"><span class="toc-number">3.4.</span> <span class="toc-text">Requirements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Features"><span class="toc-number">3.5.</span> <span class="toc-text">Features</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Architecture"><span class="toc-number">4.</span> <span class="toc-text">Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Workflow-Engine"><span class="toc-number">4.1.</span> <span class="toc-text">Workflow Engine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Workflow"><span class="toc-number">4.2.</span> <span class="toc-text">Workflow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Activity"><span class="toc-number">4.3.</span> <span class="toc-text">Activity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WorkflowContext"><span class="toc-number">4.4.</span> <span class="toc-text">WorkflowContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WorkflowReport"><span class="toc-number">4.5.</span> <span class="toc-text">WorkflowReport</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WorkflowStatus"><span class="toc-number">4.6.</span> <span class="toc-text">WorkflowStatus</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage"><span class="toc-number">5.</span> <span class="toc-text">Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Simple-Workflow-with-XML-based-Configuration"><span class="toc-number">5.1.</span> <span class="toc-text">Simple Workflow with XML-based Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#beans-xml"><span class="toc-number">5.1.1.</span> <span class="toc-text">beans.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity1-java"><span class="toc-number">5.1.2.</span> <span class="toc-text">Activity1.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity2-java"><span class="toc-number">5.1.3.</span> <span class="toc-text">Activity2.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity3-java"><span class="toc-number">5.1.4.</span> <span class="toc-text">Activity3.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleContext-java"><span class="toc-number">5.1.5.</span> <span class="toc-text">SimpleContext.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleErrorHandler-java"><span class="toc-number">5.1.6.</span> <span class="toc-text">SimpleErrorHandler.java</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Complex-Workflow-with-XML-based-Configuration"><span class="toc-number">5.2.</span> <span class="toc-text">Complex Workflow with XML-based Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#beans-xml-1"><span class="toc-number">5.2.1.</span> <span class="toc-text">beans.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PActivity1-java"><span class="toc-number">5.2.2.</span> <span class="toc-text">PActivity1.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PActivity2-java"><span class="toc-number">5.2.3.</span> <span class="toc-text">PActivity2.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity1-java-1"><span class="toc-number">5.2.4.</span> <span class="toc-text">Activity1.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity2-java-1"><span class="toc-number">5.2.5.</span> <span class="toc-text">Activity2.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity3-java-1"><span class="toc-number">5.2.6.</span> <span class="toc-text">Activity3.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleContext-java-1"><span class="toc-number">5.2.7.</span> <span class="toc-text">SimpleContext.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleErrorHandler-java-1"><span class="toc-number">5.2.8.</span> <span class="toc-text">SimpleErrorHandler.java</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Real-World-Workflow-with-Annotation-based-Configuration"><span class="toc-number">5.3.</span> <span class="toc-text">Real-World Workflow with Annotation-based Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CoffeeNewsletterConfiguration-java"><span class="toc-number">5.3.1.</span> <span class="toc-text">CoffeeNewsletterConfiguration.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CoffeeDetailsActivity-java"><span class="toc-number">5.3.2.</span> <span class="toc-text">CoffeeDetailsActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ParallelDataActivity-java"><span class="toc-number">5.3.3.</span> <span class="toc-text">ParallelDataActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ManufacturerDetailsActivity-java"><span class="toc-number">5.3.4.</span> <span class="toc-text">ManufacturerDetailsActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PriceCalculatorActivity-java"><span class="toc-number">5.3.5.</span> <span class="toc-text">PriceCalculatorActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CustomerPreferenceActivity-java"><span class="toc-number">5.3.6.</span> <span class="toc-text">CustomerPreferenceActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CombineCoffeeDetailsActivity-java"><span class="toc-number">5.3.7.</span> <span class="toc-text">CombineCoffeeDetailsActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SaveActivity-java"><span class="toc-number">5.3.8.</span> <span class="toc-text">SaveActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ThisWorkflowContext-java"><span class="toc-number">5.3.9.</span> <span class="toc-text">ThisWorkflowContext.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ParallelErrorHandler-java"><span class="toc-number">5.3.10.</span> <span class="toc-text">ParallelErrorHandler.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FallbackErrorHandler-java"><span class="toc-number">5.3.11.</span> <span class="toc-text">FallbackErrorHandler.java</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Starting-Workflow-Execution"><span class="toc-number">5.4.</span> <span class="toc-text">Starting Workflow Execution</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Inabilities"><span class="toc-number">6.</span> <span class="toc-text">The Inabilities</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#State-Persistence"><span class="toc-number">6.1.</span> <span class="toc-text">State Persistence</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Manual-Intervention"><span class="toc-number">6.2.</span> <span class="toc-text">Manual Intervention</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Distributed-Workflow"><span class="toc-number">6.3.</span> <span class="toc-text">Distributed Workflow</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Final-Words"><span class="toc-number">7.</span> <span class="toc-text">Final Words</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&text=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&is_video=false&description=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Organising Sequential Code Flow in Java with Easy-Workflow&body=Check out this article: http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&title=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&name=Organising Sequential Code Flow in Java with Easy-Workflow&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://codecoffeecommit.com/blog/organising-sequential-code-flow-in-java-with-easy-workflow/&t=Organising Sequential Code Flow in Java with Easy-Workflow"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2017-2022
    Deeheem Ansari
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/blog/">Blog</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-203770300-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-203770300-1');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'codecoffeecommit';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
